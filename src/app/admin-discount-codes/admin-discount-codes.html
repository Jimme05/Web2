<app-admin-navbar></app-admin-navbar>

<div class="container">
  <div class="dashboard-box">
    <h2 class="dashboard-title">üí≥ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h2>

    <form class="coupon-form" (ngSubmit)="createCoupon()">
      <div class="form-group">
        <label>ü™™ ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</label>
        <input
          type="text"
          placeholder="‡πÄ‡∏ä‡πà‡∏ô GAME2025"
          [(ngModel)]="couponName"
          name="couponName"
          required
        />
      </div>

      <div class="form-group">
        <label>üéØ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô)</label>
        <input
          type="number"
          min="1"
          placeholder="‡πÄ‡∏ä‡πà‡∏ô 10"
          [(ngModel)]="usageLimit"
          name="usageLimit"
          required
        />
      </div>

      <div class="form-group">
        <label>üí∞ ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</label>
        <div class="inline">
          <input
            type="number"
            min="1"
            [max]="isPercent ? 100 : null"
            placeholder="‡πÄ‡∏ä‡πà‡∏ô 15"
            [(ngModel)]="discountPercent"
            name="discountPercent"
            required
          />
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="isPercent" name="isPercent" />
            <span>{{ isPercent ? '% ‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå' : '‡∏ø ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô' }}</span>
          </label>
        </div>
      </div>

      <button class="btn-create" type="submit" [disabled]="loading">
        {{ loading ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...' : '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á' }}
      </button>
    </form>

    <h3 class="sub-title">üéüÔ∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h3>

    <div class="coupon-list" *ngIf="coupons.length > 0; else emptyCoupon">
      <div class="coupon-item" *ngFor="let c of coupons">
        <div>
          <h4>{{ c.code }}</h4>
          <p>
            ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:
            <strong>
              {{ c.isPercent ? (c.amount + '%') : ('‡∏ø' + c.amount) }}
            </strong>
            |
            ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: {{ c.usedCount || 0 }}
            /
            {{ c.maxUses ?? '‚àû' }}
          </p>
          <p class="dates">
            ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤:
            {{ c.startAt || '-' }} ‚Üí {{ c.endAt || '-' }}
          </p>
          <p *ngIf="c.minOrderAmount">‡∏¢‡∏≠‡∏î‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥: ‡∏ø{{ c.minOrderAmount }}</p>
        </div>

        <span class="status" [class.active]="c.isActive">
          {{ c.isActive ? '‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà' : '‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô' }}
        </span>
      </div>
    </div>

    <ng-template #emptyCoupon>
      <p class="empty-text">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö üòÖ</p>
    </ng-template>
  </div>
</div>
