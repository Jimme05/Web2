<app-admin-navbar></app-admin-navbar>

<div class="page-container">
  <div class="history-header">
    <h2>üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (ID: {{ userId }})</h2>
    <button (click)="goBack()">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
  </div>

  <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div *ngIf="loading" class="loading-text">
    ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
  </div>

  <!-- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div *ngIf="!loading && transactions.length > 0" class="card-list">
    <div
      class="transaction-card"
      *ngFor="let txn of transactions"
      [style.border-left-color]="getTransactionColor(txn.type)"
    >
      <div class="txn-type">
        {{ txn.type === 'topup' ? 'üí∞ ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô' : 'üéÆ ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Å‡∏°' }}
      </div>
      <div
        class="txn-amount"
        [style.color]="getTransactionColor(txn.type)"
      >
        {{ txn.type === 'topup' ? '+' : '-' }}{{ txn.amount | number }}
        ‡∏ö‡∏≤‡∏ó
      </div>

      <div class="txn-desc">{{ txn.description }}</div>
      <div class="txn-date">üìÖ {{ formatDate(txn.createdAt) }}</div>

      <div class="balance-info">
        üí≥ ‡∏Å‡πà‡∏≠‡∏ô: {{ txn.balanceBefore | number }}
        ‚ûú ‡∏´‡∏•‡∏±‡∏á: {{ txn.balanceAfter | number }}
      </div>
    </div>
  </div>

  <!-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
  <div *ngIf="!loading && transactions.length === 0" class="empty-state">
    ‚ùå ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ
  </div>
</div>
