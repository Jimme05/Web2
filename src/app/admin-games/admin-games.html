<!-- üîπ Navbar -->
<app-admin-navbar></app-admin-navbar>

<!-- üîπ ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß -->
<div class="game-container">
    <div class="game-header">
        <h2>üéÆ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏°</h2>
        <button class="btn-add" (click)="openAddModal()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <!-- üîπ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏° -->
    <div class="game-list">
        <app-game-card *ngFor="let g of games" [game]="g" (click)="openDetailModal(g)" (edit)="editGame($event)"
            (delete)="deleteGame($event)">
        </app-game-card>
    </div>
</div>

<!-- üîπ Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal($event)">
    <div class="modal-card" (click)="$event.stopPropagation()">
        <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</h3>

        <form (ngSubmit)="addGame()" enctype="multipart/form-data">
            <div class="form-group">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°</label>
                <input type="text" name="name" [(ngModel)]="newGame.name" required placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°" />
            </div>

            <div class="form-group">
                <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                <input type="text" name="genre" [(ngModel)]="newGame.genre" required
                    placeholder="‡πÄ‡∏ä‡πà‡∏ô FPS, RPG, Racing" />
            </div>

            <div class="form-group">
                <label>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                <input type="number" name="price" [(ngModel)]="newGame.price" required min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 299" />
            </div>

            <div class="form-group">
                <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
                <textarea name="description" [(ngModel)]="newGame.description" rows="3"
                    placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏°..."></textarea>
            </div>

            <div class="form-group">
                <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏Å‡∏°</label>
                <input type="file" accept="image/*" (change)="onFileSelected($event)" />

                <!-- üî∏ ‡πÅ‡∏™‡∏î‡∏á Preview -->
                <div class="preview" *ngIf="previewImage">
                    <img [src]="previewImage" alt="Preview" />
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn-cancel" (click)="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button type="submit" class="btn-submit">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Å‡∏°</button>
            </div>
        </form>
    </div>
</div>

<!-- üü£ Modal ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏° -->
<div class="modal-overlay" *ngIf="showDetailModal" (click)="closeDetailModal($event)">
    <div class="modal-detail" (click)="$event.stopPropagation()">
        <button class="btn-close" (click)="closeDetailModal()">‚úñ</button>

        <img [src]="selectedGame?.image" alt="Game Image" class="detail-img" />

        <div class="detail-content">
            <h2>{{ selectedGame?.name }}</h2>
            <p class="genre">üéÆ {{ selectedGame?.genre }}</p>
            <p class="price">üí∞ {{ selectedGame?.price | number }} ‡∏ö‡∏≤‡∏ó</p>
            <p class="desc">{{ selectedGame?.description || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î' }}</p>
        </div>
    </div>
</div>
<!-- üîπ Modal ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏° -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal($event)">
  <div class="modal-card" (click)="$event.stopPropagation()">
    <h3 *ngIf="!editMode">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
    <h3 *ngIf="editMode">üõ† ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏°</h3>

    <form (ngSubmit)="editMode ? updateGame() : addGame()" enctype="multipart/form-data">
      <div class="form-group">
        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°</label>
        <input type="text" name="name" [(ngModel)]="newGame.name" required placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏°" />
      </div>

      <div class="form-group">
        <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
        <input type="text" name="genre" [(ngModel)]="newGame.genre" required placeholder="‡πÄ‡∏ä‡πà‡∏ô FPS, RPG, Racing" />
      </div>

      <div class="form-group">
        <label>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
        <input type="number" name="price" [(ngModel)]="newGame.price" required min="0" placeholder="‡πÄ‡∏ä‡πà‡∏ô 299" />
      </div>

      <div class="form-group">
        <label>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
        <textarea name="description" [(ngModel)]="newGame.description" rows="3"
          placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏°..."></textarea>
      </div>

      <div class="form-group">
        <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏Å‡∏°</label>
        <input type="file" accept="image/*" (change)="onFileSelected($event)" />

        <div class="preview" *ngIf="previewImage">
          <img [src]="previewImage" alt="Preview" />
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button type="submit" class="btn-submit">
          {{ editMode ? "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç" : "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏Å‡∏°" }}
        </button>
      </div>
    </form>
  </div>
</div>
